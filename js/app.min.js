"use strict";function changeScrollPos(){introH=introEl.clientHeight,scrollPos=window.scrollY,checkScroll(scrollPos,introH)}function checkScroll(e,o){e>o?headerEl.classList.add("fixed"):headerEl.classList.remove("fixed")}function changeURLLanguage(){let e=selectEl.value;location.href=window.location.pathname+"#"+e,location.reload()}function changeLanguage(){let e=window.location.hash;if(e=e.slice(1),!allLangs.includes(e))return location.href=window.location.pathname+"#ru",void location.reload();const o="lang.json";fetch(o).then(e=>e.json()).then(o=>{const t=o;selectEl.value=e,document.querySelector("title").innerText=t.unit[e],document.querySelector("html").lang=e;for(let o in t){const l=document.querySelectorAll(".lng-"+o);l&&l.forEach(l=>{l.classList.contains("form__control")&&(l.placeholder=t[o][e]),l.innerHTML=t[o][e]})}})}const headerEl=document.querySelector("#header"),introEl=document.querySelector("#intro"),navEl=document.querySelector("#nav"),burgerEl=document.querySelector("#burger");let introH=introEl.clientHeight,scrollPos=window.scrollY;checkScroll(scrollPos,introH),window.addEventListener("scroll",changeScrollPos),window.addEventListener("resize",changeScrollPos);const navLinks=document.querySelectorAll("[data-scroll]");navLinks.forEach(e=>{e.addEventListener("click",o=>{o.preventDefault();const t=e.dataset.scroll,l=document.getElementById(t).offsetTop;navEl.classList.remove("show"),burgerEl.classList.remove("clicked"),window.innerWidth<=414?window.scrollTo({top:l-56,behavior:"smooth"}):window.scrollTo({top:l,behavior:"smooth"})})}),burgerEl.addEventListener("click",e=>{e.preventDefault(),burgerEl.classList.toggle("clicked"),navEl.classList.toggle("show")});const allLangs=["en","ru"],selectEl=document.querySelector("select");selectEl.addEventListener("change",changeURLLanguage),window.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelector(".preloader").style.display="none"},1e3)}),changeLanguage();const loadLater=document.querySelector(".loadLater"),head=document.querySelector("head");loadLater&&head&&head.insertAdjacentHTML("beforeend",loadLater.innerHTML);const element=document.getElementById("phone"),maskOptions={mask:"+{7}(000)000-00-00"},mask=IMask(element,maskOptions),validator=new JustValidate("#form",{validateBeforeSubmitting:!0});validator.addField("#name",[{rule:"required"},{rule:"minLength",value:3},{rule:"maxLength",value:15}]).addField("#email",[{rule:"required"},{rule:"email"}]).addField("#subject",[{rule:"required"},{rule:"minLength",value:6}]).addField("#phone",[{rule:"required"}]);const formEl=document.querySelector("#form");formEl.addEventListener("submit",async e=>{e.preventDefault(),await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:new FormData(form)}).then(e=>{console.log(e,"Данные успешно отправлены!"),form.reset()}).catch(e=>{throw e})});